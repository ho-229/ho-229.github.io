name: Hexo Build and Deploy

on:
  push:
    branches:
      - master # default branch

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Download Branch
      uses: actions/checkout@v2

    # # Caching dependencies to speed up workflows. (GitHub will remove any cache entries that have not been accessed in over 7 days.)
    # - name: Cache node modules
    #   uses: actions/cache@v1
    #   id: cache
    #   with:
    #     path: node_modules
    #     key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}
    #     restore-keys: |
    #       ${{ runner.os }}-node-

    # - name: Install Dependencies
    #   if: steps.cache.outputs.cache-hit != 'true'
    #   run: npm install

    # Deploy hexo blog website.
    - name: Build and Deploy
      uses: canhetingsky/hexo-deploy-action@master
      env:
        PERSONAL_TOKEN: ${{ secrets.TOKEN }}
        PUBLISH_REPOSITORY: ho-229/ho-229.github.io # The repository the action should deploy to.
        BRANCH: gh-page  # The branch the action should deploy to.
        PUBLISH_DIR: ./public # The folder the action should deploy.